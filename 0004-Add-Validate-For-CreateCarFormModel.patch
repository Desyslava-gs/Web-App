From c07134a455172c0aaa9628a4ecc97be5f6c61dd3 Mon Sep 17 00:00:00 2001
From: Desyslava-gs <84912601+Desyslava-gs@users.noreply.github.com>
Date: Sun, 18 Jul 2021 19:13:43 +0300
Subject: [PATCH 4/8] Add Validate For CreateCarFormModel

---
 WebAppDEMO/WebApp/Data/DataConstants.cs       |  9 ++++-
 .../WebApp/Models/Cars/CreateCarFormModel.cs  | 37 ++++++++++++++-----
 .../WebApp/Models/Cars/FuelTypeViewModel.cs   |  2 +
 WebAppDEMO/WebApp/Views/Cars/Create.cshtml    | 35 ++++++++++--------
 WebAppDEMO/WebApp/Views/Cars/Details.cshtml   |  7 ----
 5 files changed, 55 insertions(+), 35 deletions(-)

diff --git a/WebAppDEMO/WebApp/Data/DataConstants.cs b/WebAppDEMO/WebApp/Data/DataConstants.cs
index 91ebfb0..442bc70 100644
--- a/WebAppDEMO/WebApp/Data/DataConstants.cs
+++ b/WebAppDEMO/WebApp/Data/DataConstants.cs
@@ -12,11 +12,16 @@ namespace WebApp.Data
         public const int CarMakeMaxLength = 20;
         public const int CarModelMaxLength = 30;
         public const int CarYearMinValue = 1900;
-        public const int CarYearMaxValue =2100;
+        public const int CarYearMaxValue = 2100;
 
-        public const int CarFuelKindMaxLength= 10;
         public const int CarPlateNumberMaxLength = 8;
         public const int CarVinNumberMaxLength = 50;
         public const int CarColorMaxLength = 10;
+
+        public const int CarMakeMinLength = 2;
+        public const int CarModelMinLength = 2;
+        public const int CarColorMinLength = 3;
+        public const int CarVinNumberMinLength = 6;
+        public const int CarDescriptionMinLength = 4;
     }
 }
diff --git a/WebAppDEMO/WebApp/Models/Cars/CreateCarFormModel.cs b/WebAppDEMO/WebApp/Models/Cars/CreateCarFormModel.cs
index dfae50f..2dc2078 100644
--- a/WebAppDEMO/WebApp/Models/Cars/CreateCarFormModel.cs
+++ b/WebAppDEMO/WebApp/Models/Cars/CreateCarFormModel.cs
@@ -4,37 +4,54 @@ using System.ComponentModel.DataAnnotations;
 using System.Linq;
 using System.Threading.Tasks;
 using WebApp.Data.Models;
+using WebApp.Infrastructure;
 using static WebApp.Data.DataConstants;
 namespace WebApp.Models.Cars
 {
     public class CreateCarFormModel
-    {  
+    {
         //[Key]
         //[Required]
         //public string Id { get; set; }
 
-        
+
         [Required]
-        [MaxLength(CarMakeMaxLength)]
+        [StringLength(CarMakeMaxLength, MinimumLength = CarMakeMinLength)]
         public string Make { get; set; }
 
         [Required]
-        [MaxLength(CarModelMaxLength)]
-        public string Model { get; set; } 
+        [StringLength(CarModelMaxLength, MinimumLength = CarModelMinLength)]
+        public string Model { get; set; }
+
 
+        [Range(CarYearMinValue, CarYearMaxValue)]
         public int Year { get; set; }
-        
+        [Required]
+        [StringLength(CarColorMaxLength, MinimumLength = CarColorMinLength)]
         public string Color { get; set; }
-        
+
+        [Required]
+        [MaxLength(CarPlateNumberMaxLength)]
+        [RegularExpression("^[A-Z]{2}[0-9]{4}[A-Z]{2}$")]
         public string PlateNumber { get; set; }
 
+        [Required]
+        [StringLength(CarVinNumberMaxLength, MinimumLength = CarVinNumberMinLength)]
         public string VinNumber { get; set; }
-        
-        public string PictureUrl { get; set; }
 
+        [Required]
+        [Url]
+        public string PictureUrl { get; set; }
+        [Required]
+        [StringLength(
+            int.MaxValue, 
+            MinimumLength = CarDescriptionMinLength, 
+            ErrorMessage = "The field Description must be minimum length of {2}.")]
         public string Description { get; set; }
-        [Display (Name = "FuelType")]
+
+      //  [Display(Name = "Fuel Type")]
         public string FuelTypeId { get; set; }
+        [Required]
         public IEnumerable<FuelTypeViewModel> FuelTypes { get; set; }
     }
 }
diff --git a/WebAppDEMO/WebApp/Models/Cars/FuelTypeViewModel.cs b/WebAppDEMO/WebApp/Models/Cars/FuelTypeViewModel.cs
index e4723ee..52aee63 100644
--- a/WebAppDEMO/WebApp/Models/Cars/FuelTypeViewModel.cs
+++ b/WebAppDEMO/WebApp/Models/Cars/FuelTypeViewModel.cs
@@ -1,5 +1,6 @@
 ﻿using System;
 using System.Collections.Generic;
+using System.ComponentModel.DataAnnotations;
 using System.Linq;
 using System.Threading.Tasks;
 
@@ -8,6 +9,7 @@ namespace WebApp.Models.Cars
     public class FuelTypeViewModel
     {
         public string Id { get; set; }
+        [Required]
         public string Name { get; set; }
     }
 }
diff --git a/WebAppDEMO/WebApp/Views/Cars/Create.cshtml b/WebAppDEMO/WebApp/Views/Cars/Create.cshtml
index 2745e63..87d0fad 100644
--- a/WebAppDEMO/WebApp/Views/Cars/Create.cshtml
+++ b/WebAppDEMO/WebApp/Views/Cars/Create.cshtml
@@ -14,48 +14,56 @@
             <form asp-action="Create">
                 <div asp-validation-summary="ModelOnly" class="text-danger"></div>
 
+                <span asp-validation-for="Make" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="Make" class="form-control" placeholder="Марка">
-                    <span asp-validation-for="Make" class="text-danger"></span>
                 </div>
+                <span asp-validation-for="Model" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="Model" class="form-control" placeholder="Модел">
-                    <span asp-validation-for="Model" class="text-danger"></span>
+
                 </div>
+                <span asp-validation-for="Year" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="Year" value="" class="form-control" placeholder="Година">
-                    <span asp-validation-for="Year" class="text-danger"></span>
+
                 </div>
+
+                <span asp-validation-for="Color" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="Color" class="form-control" placeholder="Цвят">
-                    <span asp-validation-for="Color" class="text-danger"></span>
                 </div>
+
+                <span asp-validation-for="PlateNumber" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="PlateNumber" class="form-control" placeholder="Рег.Номер">
-                    <span asp-validation-for="PlateNumber" class="text-danger"></span>
+
                 </div>
+                <span asp-validation-for="VinNumber" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="VinNumber" class="form-control" placeholder="Рама Номер">
-                    <span asp-validation-for="VinNumber" class="text-danger"></span>
+
                 </div>
+
+                <span asp-validation-for="FuelTypes" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
@@ -64,32 +72,27 @@
                         <option value="" disabled selected hidden>Вид Гориво</option>
                         @foreach (var item in Model.FuelTypes)
                         {
-
                             <option value="@item.Id">@item.Name</option>
                         }
                     </select>
-                    <span asp-validation-for="FuelTypes" class="text-danger"></span>
-                    </div>
-               
-                
-                
-                
-
 
+                </div>
+                <span asp-validation-for="PictureUrl" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"></span>
                     </div>
                     <input asp-for="PictureUrl" class="form-control" placeholder="Снимка">
-                    <span asp-validation-for="PictureUrl" class="text-danger"></span>
+
                 </div>
+                <span asp-validation-for="Description" class="text-danger"></span>
                 <div class="input-group form-group">
                     <div class="input-group-prepend">
                         <span class="input-group-text"><i class="fas fa-key"></i></span>
                     </div>
 
                     <input asp-for="Description" class="form-control" style="height: auto" placeholder="Бележка" />
-                    <span asp-validation-for="Description" class="text-danger"></span>
+
                 </div>
 
                 @*<div class="input-group form-group">
diff --git a/WebAppDEMO/WebApp/Views/Cars/Details.cshtml b/WebAppDEMO/WebApp/Views/Cars/Details.cshtml
index 812a1de..5b51659 100644
--- a/WebAppDEMO/WebApp/Views/Cars/Details.cshtml
+++ b/WebAppDEMO/WebApp/Views/Cars/Details.cshtml
@@ -51,13 +51,6 @@
         </dt>
         <dd class="col-sm-9">
             @Model.VinNumber
-            @*</dd>
-                <dt class="col-sm-2">
-                    @Html.DisplayNameFor(model => model.PictureUrl)
-                </dt>
-                <dd class="col-sm-10">
-                    @Html.DisplayFor(model => model.PictureUrl)
-                </dd>*@
         <dt class="col-sm-3">
             <label asp-for="@Model.Description"></label>
         </dt>
-- 
2.31.1.windows.1

